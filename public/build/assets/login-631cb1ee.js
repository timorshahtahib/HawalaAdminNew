import{_ as w,p as y,N as x,q as c,h as l,d as e,b as d,w as u,t as a,i as m,e as k,g,v as f,k as i,M as E,r as v,o as n}from"../js/app2.js";const S={data(){return{showAlert:!1,email:"",password:"",emailError:null,passwordError:null,profileImg:y,logo:x,processing:!1,authError:null}},beforeCreate(){localStorage.getItem("user")&&this.$router.push("/")},methods:{async login(){this.processing=!0;try{const o=await c.post("/api/login",{email:this.email,password:this.password});if(o.data.status===!0&&o.data.access_token){const t=o.data.access_token,p=o.data.user_name;localStorage.setItem("user",JSON.stringify({token:t,username:p})),c.defaults.headers.common.Authorization="Bearer "+t,this.$router.push("/home")}else this.authError=o.data.error||"Authentication failed."}catch(o){o.response&&o.response.status===401?(console.error("Unauthorized. Logging out user."),localStorage.removeItem("user"),delete c.defaults.headers.common.Authorization,this.$router.push("/login")):(console.error("Error during login:",o),this.authError="Error during login. Please try again.")}finally{this.processing=!1}}}},N={class:"account-pages my-5 pt-5"},V={class:"container"},A={class:"row justify-content-center"},C={class:"col-md-8 col-lg-6 col-xl-5"},I={class:"card overflow-hidden"},B=E('<div class="bg-soft bg-primary"><div class="row"><div class="col-12"><div class="p-4 text-center"><h5 class="">به پنل مدیریت حواله خوش آمدید</h5></div></div></div></div>',1),T={class:"card-body pt-0"},q={class:"avatar-md profile-user-wid mb-4"},z={class:"avatar-title rounded-circle bg-light"},D=["src"],M={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},U={class:"form-group mt-2"},j=e("label",{id:"email-group"},"ایمیل",-1),O={key:0,class:"pt-2 text-danger"},P={class:"form-group mb-3"},F=e("label",{id:"password"},"رمز عبور",-1),J={key:0,class:"pt-2 text-danger"},L={class:"mt-3 d-grid"},Y=["disabled"],G={class:"mt-5 text-center"},H=e("i",{class:"mdi mdi-heart text-danger"},null,-1);function K(o,t,p,Q,s,h){const _=v("router-link"),b=v("b-form-checkbox");return n(),l("div",N,[e("div",V,[e("div",A,[e("div",C,[e("div",I,[B,e("div",T,[e("div",null,[d(_,{to:"/"},{default:u(()=>[e("div",q,[e("span",z,[e("img",{src:s.logo,alt:"",height:"80"},null,8,D)])])]),_:1})]),s.authError?(n(),l("div",M,[e("strong",null,a(s.authError),1)])):m("",!0),e("form",{class:"p-2",action:"javascript:void(0)",method:"POST",onSubmit:t[2]||(t[2]=k((...r)=>h.login&&h.login(...r),["prevent"]))},[e("div",U,[j,g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.email=r),type:"email",placeholder:"example@gmail.com",class:"form-control",required:""},null,512),[[f,s.email]]),s.emailError?(n(),l("p",O,a(s.emailError[0]),1)):m("",!0)]),e("div",P,[F,g(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=r=>s.password=r),placeholder:"رمز عبور...",class:"form-control",required:""},null,512),[[f,s.password]]),s.passwordError?(n(),l("p",J,a(s.passwordError[0]),1)):m("",!0)]),d(b,{id:"customControlInline",name:"checkbox-1",value:"accepted","unchecked-value":"not_accepted"},{default:u(()=>[i(" مرا بخاطر بسپار! ")]),_:1}),e("div",L,[e("button",{type:"submit",disabled:s.processing,class:"btn btn-primary btn-block"},a(s.processing?"لطفا صبر نمائید...":"ورود"),9,Y)])],32)])]),e("div",G,[e("p",null,[i(" آیا حساب ندارید؟ "),d(_,{to:"/register",class:"fw-medium text-primary"},{default:u(()=>[i("حالا ثبت نام نمائید")]),_:1})]),e("p",null,[i(" © "+a(new Date().getFullYear())+" ",1),H,i(" by Asia Telecom ")])])])])])])}const W=w(S,[["render",K]]);export{W as default};
