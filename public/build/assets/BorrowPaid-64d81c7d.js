import{_ as V,L as D,a as r,c as A,w as M,r as d,o as l,b as _,d as e,g as h,j as m,h as n,l as p,F as g,v as T,t as i,n as P,k as U}from"../js/app2.js";import{P as j}from"./page-header-48f5a59e.js";import"./sweetalert2.all-649b8bd9.js";import{C as q}from"./vue-select-886f034d.js";import{s as B}from"./index-es-d78b0417.js";import{L as E}from"./loader-7b01d283.js";const N={components:{Layout:D,PageHeader:j,DatePicker:B,vSelect:q,Loader:E},data(){return{title:"لیست  تمام ترانزکشن ها",items:[{text:"جستجوی ترانزکشن ها",href:"/"},{text:"لیست تمام ترانزکشن ها",active:!0}],showModal:!1,searchQuery:"",isLoading:!1,transactions:[],banks:[],transaction_type:"",rasid_bord:"",selectedCustomer:"",currencyModel:"",SelectedDakhl:"",select_start_date:"",select_end_date:"",select_end_date:"",customers:[],currencies:[],currentPage:1,totalPages:1,limit:10}},mounted(){this.getCurrency(),this.getTransaction(),this.getCustomers(),this.getFinanceAccount(),this.transaction_type="all",this.rasid_bord="all"},methods:{select_start_date(o){this.start_date=o.toString()},select_end_date(o){this.end_date=o.toString()},async getCustomers(){try{const o=await r.get("/customer");this.customers=o.data.customers.data}catch(o){console.error("Error fetching data: ",o.message)}},async getCurrency(){try{await r.get("/currencies").then(o=>{this.currencies=o.data.currencies.data}).catch(o=>{console.error("Error fetching currencies:",o)})}catch(o){console.error("Error fetching data: ",o.message)}},async getFinanceAccount(o=1){this.isLoading=!0;try{const s=await r.get(`/finance_account?page=${o}&limit=${this.limit}`);this.banks=s.data.financeAccounts.data,this.totalPages=s.data.financeAccounts.last_page,this.currentPage=o}catch(s){console.error("Error fetching finance Account:",s)}finally{this.isLoading=!1}},async getTransaction(o=1){const s=await r.get(`/transaction?page=${o}&limit=${this.limit}`);this.transactions=s.data.transactions.data,this.totalPages=s.data.transactions.last_page,this.currentPage=o},prevPage(){this.currentPage>1&&this.getTransaction(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.getTransaction(this.currentPage+1)},async searchData(){const o=await r.post("/searchtransactions",{query:this.searchQuery});this.transactions=o.data},async filterAlltransaction(){const o=await r.post("/filteralltransaction",{transaction_type:this.transaction_type,rasid_bord:this.rasid_bord,customer_id:this.selectedCustomer,currency:this.currencyModel,dakhl:this.SelectedDakhl,start_date:this.start_date,end_date:this.end_date});this.transactions=o.data.transactions}}},F={class:"row"},Q={class:"col-12"},z={class:"card"},H={class:"card-body"},I=e("h4",{class:"card-title mb-4"},"جستجوی معامله",-1),G={class:"repeater",enctype:"multipart/form-data"},J={class:"row"},K={class:"mb-3 col-md-2"},O=e("label",{for:"email"},"نوع معامله",-1),R=e("option",{value:"all"},"همه",-1),W=e("option",{value:"rasid_bord"},"رسید و بردها",-1),X=e("option",{value:"exchange"},"تبادلات",-1),Y=e("option",{value:"transfer"},"انتقلات",-1),Z=e("option",{value:"expense"},"مصارف",-1),$=e("option",{value:"icome"},"درآمدها",-1),ee=[R,W,X,Y,Z,$],te={class:"mb-3 col-md-2"},se=e("label",{for:"email"},"نوع رسید وبرد",-1),oe=e("option",{value:"all"},"همه",-1),ae=e("option",{value:"rasid"},"رسید",-1),le=e("option",{value:"bord"},"برد",-1),ne=[oe,ae,le],ie={class:"mb-3 col-md-4 mt-4 p-2"},ce={class:"col-md-2 col-xs-12"},re=e("label",{for:"supplier"},"واحد پول :",-1),de=e("option",{disabled:"",selected:""}," واحد",-1),_e=["value"],he=e("span",{class:"text-danger error-text currency_error"},null,-1),ue={class:"col-md-2 col-xs-12"},me=e("label",{for:"supplier"},"انتخاب دخل : ",-1),pe=e("option",{disabled:"",selected:""},"ابتدا واحد پول را انتخاب کنید.",-1),ge=["value"],ve=e("span",{class:"text-danger error-text dakhl_error"},null,-1),fe={class:"row"},be={class:"mb-3 col-lg-2"},ye=e("label",{for:"email"},"تاریخ شروع",-1),ke={class:"mb-3 col-lg-2"},xe=e("label",{for:"email"},"تاریخ ختم",-1),Pe={class:"col-lg-1 align-self-center"},Ce={class:"d-grid"},we=e("div",{class:"col-xl-4"},[e("div",{class:"card"})],-1),Le={class:"col-xl-12"},Se={class:"card"},Ve={class:"card-body"},De={class:"col-sm-4"},Ae={class:"search-box me-2 mb-2 d-inline-block"},Me={class:"position-relative"},Te=e("i",{class:"bx bx-search-alt search-icon"},null,-1),Ue={class:"row"},je={class:"col-sm-12"},qe={key:0},Be={key:1},Ee={key:0,class:"table-responsive"},Ne={class:"table table-centered table-nowrap text-start"},Fe=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"نمبر چک"),e("th",{class:"text-center"},"تاریخ"),e("th",{class:"text-center"},"نام مشتری"),e("th",{class:"text-center"},"رسید برد"),e("th",{class:"text-center"},"مقدار پول"),e("th",{class:"text-center"},"تفصیلات"),e("th",{class:"text-center"},"توسط")])],-1),Qe={class:"text-center"},ze={key:0},He={key:1},Ie={key:0},Ge={key:1},Je={class:"pagination pagination-rounded justify-content-center mb-2",style:{}},Ke={class:"page-item"},Oe=["disabled"],Re=e("i",{class:"mdi mdi-chevron-left"},null,-1),We=[Re],Xe={class:"page-link",href:"javascript: void(0);"},Ye={class:"page-item"},Ze=["disabled"],$e=e("i",{class:"mdi mdi-chevron-right"},null,-1),et=[$e],tt={key:1,class:"text-center font-size-20"};function st(o,s,ot,at,a,c){const C=d("PageHeader"),w=d("v-select"),v=d("date-picker"),L=d("Loader"),S=d("Layout");return l(),A(S,null,{default:M(()=>{var f;return[_(C,{title:a.title,items:a.items},null,8,["title","items"]),e("div",F,[e("div",Q,[e("div",z,[e("div",H,[I,e("form",G,[e("div",null,[e("div",J,[e("div",K,[O,h(e("select",{class:"form-control form-control-lg required","onUpdate:modelValue":s[0]||(s[0]=t=>a.transaction_type=t)},ee,512),[[m,a.transaction_type]])]),e("div",te,[se,h(e("select",{class:"form-control form-control-lg required","onUpdate:modelValue":s[1]||(s[1]=t=>a.rasid_bord=t)},ne,512),[[m,a.rasid_bord]])]),e("div",ie,[_(w,{name:"customerName",modelValue:a.selectedCustomer,"onUpdate:modelValue":s[2]||(s[2]=t=>a.selectedCustomer=t),options:a.customers,label:"name",placeholder:"مشتری مورد نظر خود را سرچ کنید",class:"searchCustomer"},null,8,["modelValue","options"])]),e("div",ce,[re,h(e("select",{class:"form-control form-control-lg select2 required",onChange:s[3]||(s[3]=(...t)=>o.change_currency&&o.change_currency(...t)),"onUpdate:modelValue":s[4]||(s[4]=t=>a.currencyModel=t)},[de,(l(!0),n(g,null,p(a.currencies,t=>(l(),n("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},i(t==null?void 0:t.name)+" "+i(t==null?void 0:t.sign),9,_e))),128))],544),[[m,a.currencyModel]]),he]),e("div",ue,[me,h(e("select",{class:"form-control form-control-lg select2 required","onUpdate:modelValue":s[5]||(s[5]=t=>a.SelectedDakhl=t)},[pe,(l(!0),n(g,null,p(a.banks,t=>(l(),n("option",{key:t.id,value:t.id},i(t.account_name),9,ge))),128))],512),[[m,a.SelectedDakhl]]),ve])]),e("div",fe,[e("div",be,[ye,_(v,{onSelect:c.select_start_date,mode:"single",type:"date",locale:"fa",column:1,clearable:""},null,8,["onSelect"])]),e("div",ke,[xe,_(v,{onSelect:c.select_end_date,mode:"single",type:"date",locale:"fa",column:1,clearable:""},null,8,["onSelect"])]),e("div",Pe,[e("div",Ce,[e("input",{type:"button",class:"btn btn-primary btn-block",value:"جستجو",onClick:s[6]||(s[6]=(...t)=>c.filterAlltransaction&&c.filterAlltransaction(...t))})])])])])])])])]),we,e("div",Le,[e("div",Se,[e("div",Ve,[e("div",De,[e("div",Ae,[e("div",Me,[h(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=t=>a.searchQuery=t),class:"form-control",placeholder:"جستجوی مشتری...",onInput:s[8]||(s[8]=(...t)=>c.searchData&&c.searchData(...t))},null,544),[[T,a.searchQuery]]),Te])])]),e("div",Ue,[e("div",je,[a.isLoading?(l(),n("div",qe,[_(L)])):(l(),n("div",Be,[(f=a.transactions)!=null&&f.length?(l(),n("div",Ee,[e("table",Ne,[Fe,e("tbody",Qe,[(l(!0),n(g,null,p(a.transactions,t=>{var u,b,y,k,x;return l(),n("tr",{key:t==null?void 0:t.id},[e("td",null,i(t.check_number),1),e("td",null,i(t==null?void 0:t.date),1),t.customer!=null?(l(),n("td",ze,i((u=t.customer)==null?void 0:u.name),1)):(l(),n("td",He,i((b=t.finance_account)==null?void 0:b.account_name),1)),e("td",null,[e("span",{class:P(["badge badge-pill font-bold font-size-12 p-2",t.rasid_bord==="rasid"?"badge-soft-success":"badge-soft-warning"])},i(t.rasid_bord==="rasid"?"رسید":"برد"),3)]),e("td",null,[U(i(t.amount.toLocaleString())+" "+i((y=t.tr_currency)==null?void 0:y.name)+" به ",1),(t==null?void 0:t.bank_account)!=null?(l(),n("span",Ie,i((k=t.bank_account)==null?void 0:k.account_name),1)):(l(),n("span",Ge,i((x=t.finance_account)==null?void 0:x.account_name),1))]),e("td",null,i(t.desc),1),e("td",null,i(t.user.name),1)])}),128))])]),e("ul",Je,[e("li",Ke,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Previous",onClick:s[9]||(s[9]=(...t)=>c.prevPage&&c.prevPage(...t)),disabled:a.currentPage===1},We,8,Oe)]),(l(!0),n(g,null,p(a.totalPages,(t,u)=>(l(),n("li",{class:P(["page-item",{active:t===a.currentPage}]),key:u},[e("a",Xe,i(t),1)],2))),128)),e("li",Ye,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Next",onClick:s[10]||(s[10]=(...t)=>c.nextPage&&c.nextPage(...t)),disabled:a.currentPage===a.totalPages},et,8,Ze)])])])):(l(),n("div",tt," نتیجه مورد نظر یافت نشد! "))]))])])])])])])]}),_:1})}const _t=V(N,[["render",st]]);export{_t as default};
