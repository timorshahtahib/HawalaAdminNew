import{_ as k,L,a as h,c as w,w as _,r as d,o as n,b as u,d as e,g as C,v as D,h as l,F as m,l as g,i as B,t as r,k as p,n as v}from"../js/app2.js";import{P as F}from"./page-header-48f5a59e.js";import{S as N}from"./sweetalert2.all-8f9540fb.js";import{L as V}from"./loader-7b01d283.js";const j={components:{Layout:L,PageHeader:F,Loader:V},data(){return{title:"لیست مشتریان حذف شده",items:[{text:"مشتری",href:"/"},{text:"مشتری",active:!0}],isLoading:!1,showModal:!1,searchQuery:"",customers:[],notFound:!1,limit:10,currentPage:1,totalPages:0}},mounted(){this.getCustomers()},methods:{showalert(o,s,i){N.fire({title:o,icon:s,confirmButtonText:i})},async getCustomers(o=1){var s;this.isLoading=!0;try{const i=await h.get(`/deletedcustomer?page=${o}&limit=${this.limit}`);this.customers=i.data.customers.data,this.totalPages=(s=i.data.customers)==null?void 0:s.last_page,this.currentPage=o}catch(i){console.error("Error fetching customers:",i)}finally{this.isLoading=!1}},prevPage(){this.currentPage>1&&this.getCustomers(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.getCustomers(this.currentPage+1)},async searchData(){try{const o=await h.post("/searchdeletedcustomer",{query:this.searchQuery});this.customers=o.data,this.notFound=this.customers.length===0}catch(o){console.log(o.message)}}}},Q={class:"row"},z={class:"col-12"},H={class:"card h-100",style:{"min-height":"100vh"}},S={class:"card-body"},T={class:"row mb-2"},E={class:"col-sm-4 bg-red",style:{"margin-top":"-2px"}},M={class:"search-box me-2 mb-2 d-inline-block"},q={class:"position-relative"},I=e("i",{class:"bx bx-search-alt search-icon"},null,-1),U={key:0},A={key:1,class:"table-responsive"},G={class:"table table-centered table-nowrap"},J=e("thead",null,[e("tr",null,[e("th",null,"آیدی"),e("th",null,"نام کامل"),e("th",null,"شماره مسلسل مشتری"),e("th",null,"شماره تماس"),e("th",null,"توضیحات"),e("th",null,"پروفایل کاربر"),e("th",null,"وضیعت")])],-1),K=e("i",{class:"mdi mdi-star me-1"},null,-1),O={key:0,class:"text-center font-size-20"},R={class:"pagination pagination-rounded justify-content-center mb-2",style:{}},W={class:"page-item"},X=["disabled"],Y=e("i",{class:"mdi mdi-chevron-left"},null,-1),Z=[Y],$={class:"page-link",href:"javascript: void(0);"},ee={class:"page-item"},te=["disabled"],se=e("i",{class:"mdi mdi-chevron-right"},null,-1),ae=[se];function oe(o,s,i,ne,a,c){const b=d("PageHeader"),f=d("Loader"),y=d("router-link"),P=d("Layout");return n(),w(P,null,{default:_(()=>[u(b,{title:a.title,items:a.items},null,8,["title","items"]),e("div",Q,[e("div",z,[e("div",H,[e("div",S,[e("div",T,[e("div",E,[e("div",M,[e("div",q,[C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=t=>a.searchQuery=t),placeholder:"جستجوی مشتری...",onInput:s[1]||(s[1]=(...t)=>c.searchData&&c.searchData(...t))},null,544),[[D,a.searchQuery]]),I])])])]),a.isLoading?(n(),l("div",U,[u(f)])):(n(),l("div",A,[e("table",G,[J,e("tbody",null,[(n(!0),l(m,null,g(a.customers,t=>(n(),l("tr",{key:t.id,style:{}},[e("td",null,r(t.id),1),e("td",null,r(t.name),1),e("td",null,r(t.cu_number),1),e("td",null,r(t.phone),1),e("td",null,r(t.desc),1),e("td",null,[u(y,{class:"btn btn-xs btn-primary",to:`/dashboard/customer/${t.id}`},{default:_(()=>[p("پروفایل")]),_:2},1032,["to"])]),e("td",null,[e("span",{class:v(["badge font-size-12",t.status===0?"bg-warning":"bg-primary"])},[K,p(" "+r(t.status),1)],2)])]))),128))])]),a.notFound?(n(),l("div",O," نتیجه مورد نظر یافت نشد! ")):B("",!0),e("ul",R,[e("li",W,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Previous",onClick:s[2]||(s[2]=(...t)=>c.prevPage&&c.prevPage(...t)),disabled:a.currentPage===1},Z,8,X)]),(n(!0),l(m,null,g(a.totalPages,(t,x)=>(n(),l("li",{class:v(["page-item",{active:t===a.currentPage}]),key:x},[e("a",$,r(t),1)],2))),128)),e("li",ee,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Next",onClick:s[3]||(s[3]=(...t)=>c.nextPage&&c.nextPage(...t)),disabled:a.currentPage===a.totalPages},ae,8,te)])])]))])])])])]),_:1})}const de=k(j,[["render",oe]]);export{de as default};
