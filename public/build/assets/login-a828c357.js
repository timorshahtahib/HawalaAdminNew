import{_ as w,s as x,O as y,x as c,h as l,d as e,b as d,w as u,t as a,i as p,e as k,g,v as f,k as i,N as E,r as v,o as n}from"../js/app2.js";const S={data(){return{showAlert:!1,email:"",password:"",emailError:null,passwordError:null,profileImg:x,logo:y,processing:!1,authError:null}},beforeCreate(){localStorage.getItem("user")&&this.$router.push("/")},methods:{async login(){this.processing=!0;try{const s=await c.post("/api/login",{email:this.email,password:this.password});if(s.data.status===!0&&s.data.access_token){const t=s.data.access_token,m=s.data.user_name;localStorage.setItem("user",JSON.stringify({token:t,username:m})),c.defaults.headers.common.Authorization="Bearer "+t,this.$router.push("/home")}else this.authError=s.data.error||"Authentication failed."}catch(s){s.response&&s.response.status===401?(console.error("Unauthorized. Logging out user."),localStorage.removeItem("user"),delete c.defaults.headers.common.Authorization,this.$router.push("/login")):s.response&&s.response.status===401?(console.error("خطا در شبکه رخ داده است",s),this.authError="خطا در شبکه رخ داده است"):(console.error("خطا در زمان ورود",s),this.authError="لطفا دوباره تلاش کنید.")}finally{this.processing=!1}}}},N={class:"account-pages my-5 pt-5"},V={class:"container"},A={class:"row justify-content-center"},C={class:"col-md-8 col-lg-6 col-xl-5"},I={class:"card overflow-hidden"},B=E('<div class="bg-soft bg-primary"><div class="row"><div class="col-12"><div class="p-4 text-center"><h5 class="">به پنل مدیریت حواله خوش آمدید</h5></div></div></div></div>',1),T={class:"card-body pt-0"},z={class:"avatar-md profile-user-wid mb-4"},D={class:"avatar-title rounded-circle bg-light"},O=["src"],U={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},j={class:"form-group mt-2"},q=e("label",{id:"email-group"},"ایمیل",-1),M={key:0,class:"pt-2 text-danger"},F={class:"form-group mb-3"},J=e("label",{id:"password"},"رمز عبور",-1),L={key:0,class:"pt-2 text-danger"},P={class:"mt-3 d-grid"},Y=["disabled"],G={class:"mt-5 text-center"},H=e("i",{class:"mdi mdi-heart text-danger"},null,-1);function K(s,t,m,Q,o,h){const _=v("router-link"),b=v("b-form-checkbox");return n(),l("div",N,[e("div",V,[e("div",A,[e("div",C,[e("div",I,[B,e("div",T,[e("div",null,[d(_,{to:"/"},{default:u(()=>[e("div",z,[e("span",D,[e("img",{src:o.logo,alt:"",height:"80"},null,8,O)])])]),_:1})]),o.authError?(n(),l("div",U,[e("strong",null,a(o.authError),1)])):p("",!0),e("form",{class:"p-2",action:"javascript:void(0)",method:"POST",onSubmit:t[2]||(t[2]=k((...r)=>h.login&&h.login(...r),["prevent"]))},[e("div",j,[q,g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.email=r),type:"email",placeholder:"example@gmail.com",class:"form-control",required:""},null,512),[[f,o.email]]),o.emailError?(n(),l("p",M,a(o.emailError[0]),1)):p("",!0)]),e("div",F,[J,g(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r),placeholder:"رمز عبور...",class:"form-control",required:""},null,512),[[f,o.password]]),o.passwordError?(n(),l("p",L,a(o.passwordError[0]),1)):p("",!0)]),d(b,{id:"customControlInline",name:"checkbox-1",value:"accepted","unchecked-value":"not_accepted"},{default:u(()=>[i(" مرا بخاطر بسپار! ")]),_:1}),e("div",P,[e("button",{type:"submit",disabled:o.processing,class:"btn btn-primary btn-block"},a(o.processing?"لطفا صبر نمائید...":"ورود"),9,Y)])],32)])]),e("div",G,[e("p",null,[i(" آیا حساب ندارید؟ "),d(_,{to:"/register",class:"fw-medium text-primary"},{default:u(()=>[i("حالا ثبت نام نمائید")]),_:1})]),e("p",null,[i(" © "+a(new Date().getFullYear())+" ",1),H,i(" by Asia Telecom ")])])])])])])}const W=w(S,[["render",K]]);export{W as default};
