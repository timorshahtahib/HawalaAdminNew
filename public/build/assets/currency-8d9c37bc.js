import{_ as P,a as y,r as u,o as n,h as i,d as e,b as d,w as h,k as m,t as l,e as E,g as f,v as b,i as _,F as k,l as S,n as N,L,x as U,c as j}from"../js/app2.js";import{P as T}from"./page-header-48f5a59e.js";import{S as V}from"./sweetalert2.all-649b8bd9.js";import{L as F}from"./loader-7b01d283.js";const B={name:"currencyTable",components:{Loader:F},data(){return{isLoading:!1,showModal:!1,currencies:[],searchQuery:"",editCurrencyName:"",editCurrencyNameError:"",editCurrencySign:"",editCurrencySignError:"",errors:{},currentPage:1,totalPages:1,limit:10}},mounted(){this.getCurrencies()},methods:{showalert(o,s,g){V.fire({title:o,text:s,icon:g,confirmButtonText:"بستن"})},closeModal(){this.showModal=!1},async getCurrencies(o=1){this.isLoading=!0;try{const s=await y.get(`/currencies?page=${o}&limit=${this.limit}`);this.currencies=s.data.currencies.data,this.totalPages=s.data.currencies.last_page,this.currentPage=o}catch(s){console.error("Error fetching Currency:",s)}finally{this.isLoading=!1}},prevPage(){this.currentPage>1&&this.getCurrencies(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.getCurrencies(this.currentPage+1)},openEditModal(){this.showModal=!0},async editCurrencyFunction(o){const s=await y.get(`/currencies/${o}`);this.editCurr=s.data,this.openEditModal(),this.editCurrencyName=this.editCurr.name,this.editCurrencySign=this.editCurr.sign},async editCucurrencyForm(){let o=this.editCurr.id;const s=await y.post("/updatecurrency",{name:this.editCurrencyName,sign:this.editCurrencySign,id:o});s.data!=null?s.data.status===!1?s.data.message!=null?this.showalert(s.data.message,"خطا","error"):this.errors=s.data.error:(this.errors={},this.editCurrencyName=null,this.editCurrencySign=null,this.getCurrencies(),this.showalert("واحد پولی  با موفقیت ویرایش شد!","موفقانه","success")):(this.errors={},this.closeModal(),this.showalert(s.data.message,"success","success")),this.showModal=!1},async deleteCurrency(o){if(window.confirm("آیا میخواهید که مشتری حذف شود؟"))try{const s=await y.delete(`/api/currencies/${o}`);this.customerSearch=s.data,s.status===204&&(this.showalert("واحد پولی با موفقیت حذف شد!","موفقانه","success"),this.getCurrencies())}catch{this.showalert("واحد پولی با موفقیت حذف نشد!","نا موفقانه","error")}else return},async searchData(){const o=await y.post("/searchcurrency",{query:this.searchQuery});this.currencies=o.data}}},D={class:"col-sm-12"},Q={class:"text-sm-end"},z={class:"row flex justify-between"},H={class:"row flex justify-between"},q={class:"col-md-6 col-sm-12 col-lg-6"},I={class:"mb-3"},A=e("label",{class:"form-control-label px-3"},[m("نام واحد پولی"),e("span",{class:"text-danger"},"*")],-1),G={key:0,class:"text-danger"},J={key:1,class:"text-danger error-text afrad_error"},K={class:"col-sm-12 col-md-6 col-lg-6"},O={class:"mb-3"},R=e("label",{class:"form-control-label px-3"},"نشان",-1),W={key:0,class:"text-danger"},X={key:1,class:"text-danger error-text afrad_error"},Y={class:"text-end pt-5 mt-1 g-2"},Z={class:"col-sm-4 bg-red",style:{"margin-top":"-52px"}},$={class:"search-box me-2 mb-2 d-inline-block"},ee={class:"position-relative"},se=e("i",{class:"bx bx-search-alt search-icon"},null,-1),te={key:0},re={key:1},oe={key:0,class:"table-responsive"},ne={class:"table table-centered table-nowrap"},ie=e("thead",null,[e("tr",null,[e("th",null,"آیدی"),e("th",null,"واحد پولی"),e("th",null,"نشان"),e("th",null,"وضعیت"),e("th",null,"اکشن")])],-1),le=e("i",{class:"mdi mdi-star me-1"},null,-1),ae={class:"btn btn-xs"},ce=["onClick"],de={class:"btn btn-xs"},ue=["onClick"],me={class:"pagination pagination-rounded justify-content-center mb-2",style:{}},he={class:"page-item"},_e=["disabled"],ge=e("i",{class:"mdi mdi-chevron-left"},null,-1),pe=[ge],ye={class:"page-link",href:"javascript: void(0);"},fe={class:"page-item"},be=["disabled"],ve=e("i",{class:"mdi mdi-chevron-right"},null,-1),xe=[ve],Ce={key:1,class:"text-center font-size-20"};function we(o,s,g,M,t,a){const C=u("b-alert"),v=u("b-button"),x=u("b-modal"),w=u("Loader");return n(),i(k,null,[e("div",D,[e("div",Q,[d(x,{modelValue:t.showModal,"onUpdate:modelValue":s[4]||(s[4]=r=>t.showModal=r),title:"ویرایش کردن واحد پولی جدید","title-class":"text-black font-18","body-class":"p-3","hide-footer":""},{default:h(()=>[d(C,{modelValue:o.isError,"onUpdate:modelValue":s[0]||(s[0]=r=>o.isError=r),class:"mb-4",variant:"danger",dismissible:""},{default:h(()=>[m(l(this.formError),1)]),_:1},8,["modelValue"]),e("form",{onSubmit:s[3]||(s[3]=E((...r)=>a.editCucurrencyForm&&a.editCucurrencyForm(...r),["prevent"]))},[e("div",z,[e("div",H,[e("div",q,[e("div",I,[A,f(e("input",{type:"text",id:"editCurrencyName","onUpdate:modelValue":s[1]||(s[1]=r=>t.editCurrencyName=r),placeholder:"نام واحد پولی...",class:"form-control"},null,512),[[b,t.editCurrencyName]]),t.editCurrencyNameError?(n(),i("p",G,l(t.editCurrencyNameError),1)):_("",!0),t.errors.name?(n(),i("span",J,l(t.errors.name[0]),1)):_("",!0)])]),e("div",K,[e("div",O,[R,f(e("input",{type:"text",id:"editCurrencySign","onUpdate:modelValue":s[2]||(s[2]=r=>t.editCurrencySign=r),placeholder:"نشان...",class:"form-control"},null,512),[[b,t.editCurrencySign]]),t.editCurrencySignError?(n(),i("p",W,l(o.t),1)):_("",!0),t.errors.sign?(n(),i("span",X,l(t.errors.sign[0]),1)):_("",!0)])])])]),e("div",Y,[d(v,{variant:"danger",onClick:a.closeModal},{default:h(()=>[m("بستن")]),_:1},8,["onClick"]),d(v,{type:"submit",variant:"success",class:"ms-1 ml-2"},{default:h(()=>[m("آپدیت")]),_:1})])],32)]),_:1},8,["modelValue"])])]),e("div",Z,[e("div",$,[e("div",ee,[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=r=>t.searchQuery=r),placeholder:"جستجوی مشتری...",onInput:s[6]||(s[6]=(...r)=>a.searchData&&a.searchData(...r))},null,544),[[b,t.searchQuery]]),se])])]),t.isLoading?(n(),i("div",te,[d(w)])):(n(),i("div",re,[t.currencies.length?(n(),i("div",oe,[e("table",ne,[ie,e("tbody",null,[(n(!0),i(k,null,S(t.currencies,r=>(n(),i("tr",{key:r.id},[e("td",null,l(r.id),1),e("td",null,l(r.name),1),e("td",null,l(r.sign),1),e("td",null,[e("span",{class:N(["badge font-size-12",r.status===0?"bg-warning":"bg-primary"])},[le,m(" "+l(r.status),1)],2)]),e("td",null,[e("button",ae,[e("i",{class:"fas fa-pencil-alt text-success me-1",onClick:p=>a.editCurrencyFunction(r.id)},null,8,ce)]),e("button",de,[e("i",{class:"fas fa-trash-alt text-danger me-1",onClick:p=>a.deleteCurrency(r.id)},null,8,ue)])])]))),128))])]),e("ul",me,[e("li",he,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Previous",onClick:s[7]||(s[7]=(...r)=>a.prevPage&&a.prevPage(...r)),disabled:t.currentPage===1},pe,8,_e)]),(n(!0),i(k,null,S(t.totalPages,(r,p)=>(n(),i("li",{class:N(["page-item",{active:r===t.currentPage}]),key:p},[e("a",ye,l(r),1)],2))),128)),e("li",fe,[e("a",{class:"page-link",href:"javascript: void(0);","aria-label":"Next",onClick:s[8]||(s[8]=(...r)=>a.nextPage&&a.nextPage(...r)),disabled:t.currentPage===t.totalPages},xe,8,be)])])])):(n(),i("div",Ce," نتیجه مورد نظر یافت نشد! "))]))],64)}const ke=P(B,[["render",we]]),Se={components:{Layout:L,PageHeader:T,currencyTable:ke},data(){return{currencies:[],title:"لیست واحدات پولی",items:[{text:"داشبورد",href:"/"},{text:"واحد پولی",active:!0}],showModal:!1,submitted:!1,isError:!1,formError:"",currencyName:"",currencyNameError:"",currencySign:"",currencySignError:"",errors:{}}},mounted(){},methods:{showalert(o,s,g){V.fire({title:o,text:s,icon:g,confirmButtonText:"خوب"})},async handleSubmit(o){if(this.submitted=!0,this.currencyName&&this.currencySign){const s=await U.post("/api/currencies",{name:this.currencyName,sign:this.currencySign});s.data!=null&&(s.data.status===!1?s.data.message!=null?console.log(s.data.message,"error","error!"):this.errors=s.data.error:(this.errors={},this.currencyName=null,this.currencySign=null,this.showModal=!1,location.reload(),this.showalert("واحد پولی با موفقیت ثبت شد!","success","success"))),this.showModal=!1}else this.isError=!0,this.formError="اطلاعات را وارد کنید"}}},Ne={class:"row"},Pe={class:"col-12"},Ee={class:"card",style:{"min-height":"100vh"}},Ve={class:"card-body"},Me={class:"row mb-2"},Le={class:"col-sm-12"},Ue={class:"text-sm-end"},je=e("i",{class:"mdi mdi-plus me-1"},null,-1),Te={class:"row flex justify-between"},Fe={class:"row flex justify-between"},Be={class:"col-md-6 col-sm-12 col-lg-6"},De={class:"mb-3"},Qe=e("label",{class:"form-control-label px-3"},[m("نام واحد پولی"),e("span",{class:"text-danger"},"*")],-1),ze={key:0,class:"text-danger"},He={key:1,class:"text-danger error-text afrad_error"},qe={class:"col-sm-12 col-md-6 col-lg-6"},Ie={class:"mb-3"},Ae=e("label",{class:"form-control-label px-3"},"نشان",-1),Ge={key:0,class:"text-danger"},Je={key:1,class:"text-danger error-text afrad_error"},Ke={class:"text-end pt-5 mt-1 g-2"};function Oe(o,s,g,M,t,a){const C=u("PageHeader"),v=u("b-alert"),x=u("b-button"),w=u("b-modal"),r=u("currencyTable"),p=u("Layout");return n(),j(p,null,{default:h(()=>[d(C,{title:t.title,items:t.items},null,8,["title","items"]),e("div",Ne,[e("div",Pe,[e("div",Ee,[e("div",Ve,[e("div",Me,[e("div",Le,[e("div",Ue,[e("button",{type:"button",class:"btn btn-success btn-rounded mb-2 me-2",onClick:s[0]||(s[0]=c=>t.showModal=!0)},[je,m("واحد جدید ")]),d(w,{modelValue:t.showModal,"onUpdate:modelValue":s[6]||(s[6]=c=>t.showModal=c),title:"اضافه کردن واحد پولی جدید","title-class":"text-black font-18","body-class":"p-3","hide-footer":""},{default:h(()=>[d(v,{modelValue:t.isError,"onUpdate:modelValue":s[1]||(s[1]=c=>t.isError=c),class:"mb-4",variant:"danger",dismissible:""},{default:h(()=>[m(l(this.formError),1)]),_:1},8,["modelValue"]),e("form",{onSubmit:s[5]||(s[5]=E((...c)=>a.handleSubmit&&a.handleSubmit(...c),["prevent"])),enctype:"multipart/form-data"},[e("div",Te,[e("div",Fe,[e("div",Be,[e("div",De,[Qe,f(e("input",{type:"text",id:"currencyName","onUpdate:modelValue":s[2]||(s[2]=c=>t.currencyName=c),placeholder:"نام واحد پولی...",class:"form-control"},null,512),[[b,t.currencyName]]),t.currencyNameError?(n(),i("p",ze,l(t.currencyNameError),1)):_("",!0),t.errors.name?(n(),i("span",He,l(t.errors.name[0]),1)):_("",!0)])]),e("div",qe,[e("div",Ie,[Ae,f(e("input",{type:"text",id:"currencySign","onUpdate:modelValue":s[3]||(s[3]=c=>t.currencySign=c),placeholder:"نشان...",class:"form-control"},null,512),[[b,t.currencySign]]),t.currencySignError?(n(),i("p",Ge,l(t.currencySign),1)):_("",!0),t.errors.sign?(n(),i("span",Je,l(t.errors.sign[0]),1)):_("",!0)])])])]),e("div",Ke,[d(x,{variant:"danger",onClick:s[4]||(s[4]=c=>t.showModal=!1)},{default:h(()=>[m("بستن")]),_:1}),d(x,{type:"submit",variant:"success",class:"ms-1 ml-2"},{default:h(()=>[m("ساختن")]),_:1})])],32)]),_:1},8,["modelValue"])])])]),d(r)])])])])]),_:1})}const Ze=P(Se,[["render",Oe]]);export{Ze as default};
